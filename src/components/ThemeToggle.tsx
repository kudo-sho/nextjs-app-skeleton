/**
 * ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
 * ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒã¨ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™
 * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ†ãƒ¼ãƒçŠ¶æ…‹ã‚’Zustandã‚¹ãƒˆã‚¢ã§ç®¡ç†ã—ã¾ã™
 */

'use client';

import { useEffect } from 'react';
import { useAppStore } from '@/store';
import Button from './ui/Button';

/**
 * ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
 * 
 * æ©Ÿèƒ½:
 * - ç¾åœ¨ã®ãƒ†ãƒ¼ãƒã«å¿œã˜ãŸã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºï¼ˆğŸŒ™/â˜€ï¸ï¼‰
 * - ã‚¯ãƒªãƒƒã‚¯ã§ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
 * - HTMLè¦ç´ ã®ã‚¯ãƒ©ã‚¹åã‚’å‹•çš„ã«å¤‰æ›´ã—ã¦ãƒ†ãƒ¼ãƒã‚’é©ç”¨
 * 
 * @returns ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã®JSXè¦ç´ 
 */
export default function ThemeToggle() {
  // Zustandã‚¹ãƒˆã‚¢ã‹ã‚‰ãƒ†ãƒ¼ãƒçŠ¶æ…‹ã¨åˆ‡ã‚Šæ›¿ãˆé–¢æ•°ã‚’å–å¾—
  const { theme, toggleTheme } = useAppStore();

  /**
   * ãƒ†ãƒ¼ãƒãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ã«HTMLè¦ç´ ã®ã‚¯ãƒ©ã‚¹åã‚’æ›´æ–°
   * Tailwind CSSã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æ©Ÿèƒ½ï¼ˆclass strategyï¼‰ã«å¯¾å¿œ
   */
  useEffect(() => {
    const root = window.document.documentElement;
    
    // æ—¢å­˜ã®ãƒ†ãƒ¼ãƒã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
    root.classList.remove('light', 'dark');
    
    // æ–°ã—ã„ãƒ†ãƒ¼ãƒã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
    root.classList.add(theme);
  }, [theme]); // themeãŒå¤‰æ›´ã•ã‚ŒãŸæ™‚ã«å®Ÿè¡Œ

  return (
    <Button
      variant="outline" // æ ç·šã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒœã‚¿ãƒ³
      size="sm" // å°ã‚µã‚¤ã‚º
      onClick={toggleTheme} // ã‚¯ãƒªãƒƒã‚¯æ™‚ã«ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
      aria-label="Toggle theme" // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
    >
      {/* ç¾åœ¨ã®ãƒ†ãƒ¼ãƒã«å¿œã˜ã¦ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤º */}
      {theme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸'}
    </Button>
  );
}